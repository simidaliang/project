"use strict";$(function(){var n=1,s=0;i(1,s),$("#topCategoryMenu").css("display","none"),$(".all-category").on("mouseover",function(){$("#topCategoryMenu").css("display","block")}),$(".all-category").on("mouseout",function(){$("#topCategoryMenu").css("display","none")});var t=!0;$(".gifts").on("click",function(){t?$(this).parent().addClass("bg-gift"):t||$(this).parent().removeClass("bg-gift"),t=!t}),$(".input-text").on("focus",function(){$(this).parent().parent().removeClass("fold"),$(this).parent().parent().addClass("unfold")}),$(".screen").children().on("click",function(){$(this).siblings().removeClass("selected"),$(this).addClass("selected")});var a=$("#main-nav").offset().top;function i(n,s){$.ajax({type:"post",url:"../api/pageqty.php",async:!0,data:{page:n,qty:30,how:s},success:function(n){for(var s=JSON.parse(n),t="",a=0;a<s.list.length;a++)t+='<li class="item" data-id="'+s.list[a].gid+'">\n                    <div class="goods-content" goods-item="">\n                        \x3c!--商品大图--\x3e\n                        <div class="goods-pic"> <a href="http://localhost:1811/liangjiayong/src/html/goods.html?goods='+s.list[a].gid+'" target="_blank" title="'+s.list[a].goods_name1+'"> <img\n                                    src="../'+s.list[a].list_pic+'"\n                                    nc-goods-pic="" title="'+s.list[a].goods_name1+'" alt="'+s.list[a].goods_name1+'"> </a> </div>\n\n                        \x3c!--商品详细信息--\x3e\n                        <div class="goods-info">\n                            <div class="goods-price-deal offer-1">\n                                \x3c!--该商品如果是批发模式--\x3e\n                                <div class="goods-price-offer retail_goods_price"><span\n                                        class="number number-20 number-thin sale-price" title=""><span\n                                            class="yuan">￥</span><span class="integer">'+s.list[a].goods_price+'</span></div>\n                            </div>\n                            <div class="p-name"><a href="http://localhost:1811/liangjiayong/src/html/goods.html?goods='+s.list[a].gid+'" target="_blank" title="">\n                                    <em>\n                                        \x3c!-- 商品类型_Star --\x3e\n                                        \x3c!--零售--\x3e\n                                        \x3c!-- 商品类型_End --\x3e\n                                        '+s.list[a].goods_name1+"\n                                        <i>"+s.list[a].goods_name2+'</i>\n                                    </em>\n                                </a></div>\n                            <div class="p-commit"><strong class="m-r-20"><a href="javascript:;" class="num"\n                                        target="_blank" title="成交量">'+s.list[a].sales+'</a> 笔成交</strong><strong class="m-r-10"><a\n                                        href="javascript:;" class="num" style="color: #999" target="_blank"\n                                        title="评论数">'+s.list[a].contents+'</a> 条评论</strong></div>\n                            <div class="p-shop"><span><a href="javascript:;" title="'+s.list[a].shop+'" class="name">'+s.list[a].shop+'</a></span></div>\n                            <div class="p-icons"><i class="goods-icons">自营</i></div>\n                            \x3c!-- S 添加到购物车区域--\x3e\n                            <div class="p-operate" nc-shopping-box="">\n                                <div class="p-o-btn focus" id="favoriteBtn5049"> <a href="javascript:;"\n                                        nc_type="goodsFavoritesBtn" data-param="{\'commonId\':\'5049\'}"><i\n                                            class="shop_common"></i>收藏</a> <a nc_type="favorited"\n                                        style="display: none;"><span class="fa fa-star"\n                                            style="font-size:16px; margin-right:4px; vertical-align:middle"></span>已收藏</a>\n                                </div>\n                                \x3c!-- S 加入购物车等按钮区域--\x3e\n                                <div class="p-o-btn addcart">\n                                    <a class="" href="javascript:;" nc-add-cart="" data-common-id="'+s.list[a].gid+'"><i\n                                            class="shopping-cart"></i>加入购物车</a>\n                                </div>\n                                \x3c!-- E 加入购物车等按钮区域--\x3e\n                            </div>\n                            \x3c!-- S 添加到购物车区域--\x3e\n\n                        </div>\n                    </div>\n                    <div class="clear"></div>\n                </li>';$(".list_pic").html(t),$(".addcart").on("click",function(){e(),0<e()?$.ajax({type:"post",url:"../api/checkcart.php",async:!0,data:{gid:$(this).find("a").attr("data-common-id"),num:1},success:function(n){var s=JSON.parse(n);o(),alert(s.message)}}):location.href="http://localhost:1811/liangjiayong/src/html/login.html"})}})}function o(){e(),0<e()?($("#tbarCartNum").css("display","block"),$(".my-cart-count").css("display","block"),$.ajax({type:"post",url:"../api/getfromcart.php",async:!0,data:{what:1},success:function(n){var s=JSON.parse(n);$("#tbarCartNum").html(s.length),$(".my-cart-count").html(s.length)}})):($("#tbarCartNum").css("display","none"),$(".my-cart-count").css("display","none"))}function e(){for(var n=document.cookie.split("; "),s=new Object,t=0;t<n.length;t++)s[n[t].split("=")[0]]=n[t].split("=")[1];return parseInt(s.id)}$(window).on("scroll",function(){$(window).scrollTop()>=a?$("#main-nav").addClass("nav-pin"):$(window).scrollTop()<a&&$("#main-nav").removeClass("nav-pin")}),$("#goodsBrowseContent").on("mouseover",function(){$(".bx-prev").css("display","inline"),$(".bx-next").css("display","inline")}),$("#goodsBrowseContent").on("mouseout",function(){$(".bx-prev").css("display","none"),$(".bx-next").css("display","none")}),$(".pagination").find("li").on("click",function(){0==$(this).index()?n=1:8==$(this).index()?n=5:1==$(this).index()?n--:7==$(this).index()?n++:n=$(this).index()-1,n<=1?n=1:5<=n&&(n=5),console.log(n,s),i(n,s),$(".pageqty").find("span").removeClass("currentpage"),$(".pageqty").find("span")[n+1].setAttribute("class","currentpage")}),$(".screen li").on("click",function(){s=$(this).index(),console.log(n,s),i(n,s)}),o(),$("#topMyCart").on("click",function(){e(),0<e()?location.href="http://localhost:1811/liangjiayong/src/html/cart.html":location.href="http://localhost:1811/liangjiayong/src/html/login.html"})});