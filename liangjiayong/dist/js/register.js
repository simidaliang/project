"use strict";$(function(){$(".verify_code").html(e());var a=1;function e(){for(var e="1234567890qwertyuiopadsfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM",o="",a=0;a<4;a++){o+=e.charAt(parseInt(Math.random()*e.length))}return o}$("#mobile").on("blur",function(){var e=$("#mobile").val().trim();e?$.ajax({type:"post",url:"../api/checkname.php",async:!0,data:{username:e},success:function(e){console.log(e);var o=JSON.parse(e);a=o.code,function(e){e.code?$(".error").css("display","block"):$(".error").css("display","none");$(".error").html(e.message)}(o)}}):alert("用户名不能为空")}),$("#mobileSubmitFirst").on("click",function(){$("#psw").val()?1*a?alert("注册失败"):$.ajax({type:"post",url:"../api/register.php",async:!0,data:{username:$("#mobile").val().trim(),psw:$("#psw").val()},success:function(e){var o=JSON.parse(e);console.log(o.code),0==o.code&&(alert(o.message),location.href="../html/login.html")}}):alert("密码不能为空")}),$("#loginSubmit").on("click",function(){$("#loginName").val()&&$("#memberPwd")?$("#captcha").val().toLowerCase()==$(".verify_code").html().toLowerCase()?$.ajax({type:"post",url:"../api/login.php",async:!0,data:{username:$("#loginName").val().trim(),psw:$("#memberPwd").val()},success:function(e){var o=JSON.parse(e);1==o.code?(document.cookie="id="+o.list[0].id+";path=/",document.cookie="name="+o.list[0].name+";path=/",location.href="../ind.html"):alert(o.message)}}):alert("验证码错误"):alert("用户名或密码不能为空")}),$(".code-pic").on("mouseover",function(){$(this).css("opacity","1")}),$(".code-pic").on("mouseout",function(){$(this).css("opacity","0")}),$(".code-pic").on("click",function(){$(".verify_code").html(e())})});